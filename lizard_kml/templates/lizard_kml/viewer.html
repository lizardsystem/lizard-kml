{% extends "lizard_kml/lizard_ui_realbase.html" %}
{# extends "lizard_ui/realbase.html" #}

{% block title %}Kustviewer - Lizard{% endblock %}

{% block css %}
{{ block.super }}
<link rel="stylesheet"
      type="text/css"
      href="{{ STATIC_URL }}lizard_kml/extjs-4.1.1-rc2/resources/css/ext-all-scoped.css" />
<link rel="stylesheet"
      type="text/css"
      href="{{ STATIC_URL }}lizard_kml/viewer.css" />
{% endblock css %}

{% block map-javascript %}
{% comment %}
<script type="text/javascript" src="{{ STATIC_URL }}lizard_kml/extjs-4.1.1-rc2/ext.js"></script>
{% endcomment %}
<script type="text/javascript" src="{{ STATIC_URL }}lizard_kml/extjs-4.1.1-rc2/ext-all.js"></script>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript" src="{{ STATIC_URL }}lizard_kml/viewer.js"></script>
{% endblock map-javascript %}

{% block sidebar %}
<div id="accordion" class="sidebarbox sidebarbox-stretched">
  <div id="extaccor"></div>
  <div id="tmp-controls">
    <div class="tmp-controls-row">
      <span class="above-content-text">Ophoging:</span>
      <span id="lift-slider" class="above-slider"></span>
    </div>
    <div class="tmp-controls-row">
      <span class="above-content-text">Opschaling:</span>
      <span id="exaggeration-slider" class="above-slider"></span>
    </div>
    <div class="tmp-controls-row">
      <button id="colormaps-button">Kleurenmap</button>
      <button id="extrude-button">Uitvullen</button>
    </div>
    <div class="tmp-controls-row">
      <span class="above-content-text">Transparantie:</span>
      <span id="polyalpha-slider" class="above-slider"></span>
    </div>
    <div class="tmp-controls-row">
      <span class="above-content-text">Verschuiving:</span>
      <span id="move-slider" class="above-slider"></span>
    </div>
    <div class="tmp-controls-row">
      <button id="commit-button">Verander weergave</button>
    </div>
  </div>
</div>
{% comment %}
<div id="accordion" class="sidebarbox sidebarbox-stretched">
  <h2>Beschikbare kaartlagen</h2>
  <ul class="automatic-tree filetree treeview kmltree">
    {% for category in view.category_tree %}
    <li>
      {# category node #}
      <span class="folder">{{ category.name|safe }}</span>
      <ul>
        {% for child in category.children %}
        <li class="kml-resource-link"
            data-kml-resource-id="{{ child.id }}"
            data-kml-resource-url="{{ child.url }}"
            data-preview-image-url="{{ child.preview_image_url }}">
            {{ child.name|safe }}
        </li>
        {% endfor %}
      </ul>
    </li>
    {% endfor %}
  </ul>
  <h2>Context</h2>
  <img id="kml-preview" src="data:null" alt="preview" width="200" height="150" />
  <div id="extslider"></div>
  <h2>Jarkus</h2>
</div>
<div id="context-workspace" class="sidebarbox workspace">
</div>
<div id="edit-workspace" class="sidebarbox workspace">
</div>
{% endcomment %}
{% endblock %}

{% block above-content %}
<a href="javascript:void(0)" onclick="kvu.tsc.rewind()">rewind</a>
<a href="javascript:void(0)" onclick="kvu.tsc.togglePlayPause()">play/pause</a>
<a href="javascript:void(0)" onclick="kvu.setDefaultView()">default view</a>
{% comment %}
<a href="javascript:void(0)" onclick="kfc.unloadAll()">unloadAll</a>
<a href="javascript:void(0)" onclick="kvu.replaceMapWithErrorMessage('test')">mkerror</a>
{% endcomment %}
{% endblock %}

{% block content %}
<div id="map3d"></div>
{% endblock %}

{% block page %}
{% include "lizard_kml/colormap.html" %}
{{ block.super }}
<div id="loader">
  <div id="loader-inner"></div>
  <div id="loader-text"><noscript>Om deze site te bezoeken, is een browser met ondersteuning voor Javascript nodig.</noscript></div>
</div>
<script type="text/javascript">
$(document).ready(function(){
    // Set the slider ranges to 0-500, 1-50
    $("#lift-slider").slider({
        stop: function(event, ui) {kmlViewerSetParam('lift', ui.value);},
        min: 0.0,
        max: 500.0,
        step: 1.0,
        value: 40.0
    });
    $("#exaggeration-slider").slider({
        stop: function(event, ui) {kmlViewerSetParam('exaggeration', ui.value);},
        min: 1.0,
        max: 50.0,
        step: 1.0,
        value: 4.0
    });
    $("#colormaps-button").button();
    $("#colormaps-button").click(function(event, ui) {$("#colormaps").dialog("open");});
    $("#colormaps").dialog({
        autoOpen: false,
        height: 300,
        width: 500,
        position: [0, 0]
    });
    var extrude = false;
    $("#extrude-button").button();
    $("#extrude-button").click(function(event, ui) {
        extrude = !extrude;
        if (extrude)
            $(this).addClass('extrude-active');
        else
            $(this).removeClass('extrude-active');
        kmlViewerSetParam('extrude', extrude ? 1 : 0);
    });
    $("#polyalpha-slider").slider({
        stop: function(event, ui) {kmlViewerSetParam('polyalpha', ui.value);},
        min: 0.0,
        max: 1.0,
        step: 0.05,
        value: 0.8
    });
    $("#move-slider").slider({
        stop: function(event, ui) {kmlViewerSetParam('move', ui.value);},
        min: 0.0,
        max: 2.0,
        step: 0.1,
        value: 0.1
    });
    $("#commit-button").button();
    $("#commit-button").click(function(event, ui) {kmlViewerCommitParams();});
    // load KML viewer
    //initializeComponents();
});
</script>
{% endblock page %}
